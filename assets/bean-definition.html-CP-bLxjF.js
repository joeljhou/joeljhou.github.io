import{_ as e,r as p,o,c,a,b as n,d as l,e as s}from"./app-BcLXJ2bY.js";const i={},u=s(`<h1 id="bean-定义" tabindex="-1"><a class="header-anchor" href="#bean-定义"><span>Bean 定义</span></a></h1><h2 id="概述" tabindex="-1"><a class="header-anchor" href="#概述"><span>概述</span></a></h2><blockquote><p>构建应用程序主干并由Spring IoC 容器管理的对象称为 Bean。 由<code>org.springframework.beans.factory.config.BeanDefinition</code> 接口表示，定义了Bean的配置元数据。</p></blockquote><h2 id="beandefinition" tabindex="-1"><a class="header-anchor" href="#beandefinition"><span>BeanDefinition</span></a></h2><p><code>BeanDefinition</code> 包含以下元数据：</p><ul><li>Bean的包限定类名</li><li>Bean的行为配置元素，例如作用域、生命周期回调等</li><li>Bean的依赖关系</li><li>其他配置信息（如：管理连接池的Bean可以配置池的大小，连接数量等）</li></ul><p>该元数据转换为组成每个bean定义的一组属性。 下表介绍了这些属性：</p><table><thead><tr><th>属性</th><th>描述</th></tr></thead><tbody><tr><td>Class</td><td>Bean的全限定类名</td></tr><tr><td>Name</td><td>Bean的名称</td></tr><tr><td>Scope</td><td>Bean的作用域</td></tr><tr><td>Constructor arguments</td><td>Bean的构造函数参数</td></tr><tr><td>Properties</td><td>Bean的属性</td></tr><tr><td>Autowiring mode</td><td>Bean的自动装配模式</td></tr><tr><td>Lazy initialization mode</td><td>Bean的延迟初始化模式</td></tr><tr><td>Initialization method</td><td>Bean的初始化方法</td></tr><tr><td>Destruction method</td><td>Bean的销毁方法</td></tr></tbody></table><h2 id="命名beans" tabindex="-1"><a class="header-anchor" href="#命名beans"><span>命名Beans</span></a></h2><p>在Spring IoC容器中，每个Bean都必须有一个<mark>唯一的标识符</mark>。</p><p><strong>基于XML的配置元数据中</strong></p><p>使用<code>id</code>属性、<code>name</code>属性为Bean命名（默认采取小写字母开头的驼峰命名法），通过<code>ref</code>属性引用其他Bean</p><div class="language-xml line-numbers-mode" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token comment">&lt;!-- 示例XML配置 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 命名Bean并引用其他Bean --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.example.UserService<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userRepository<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userRepo<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token comment">&lt;!-- 使用别名引用 Bean --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userRepository<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.example.UserRepository<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!-- 使用别名定义 Bean --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>alias</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userRepository<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userRepo<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,13),r=a("p",null,[n("如果使用Java Configuration，则可以使用"),a("code",null,"@Bean"),n("注解为Bean命名。")],-1),d={href:"https://docs.spring.io/spring-framework/reference/core/beans/java/bean-annotation.html",target:"_blank",rel:"noopener noreferrer"},k=s(`<h2 id="实例化bean" tabindex="-1"><a class="header-anchor" href="#实例化bean"><span>实例化Bean</span></a></h2><blockquote><p><code>Bean</code>定义实际上是创建一个或多个对象的方法。 当容器被询问时，它会查看指定名称的Bean定义，并使用该定义创建（或获取）一个对象。</p></blockquote><h3 id="使用构造函数实例化" tabindex="-1"><a class="header-anchor" href="#使用构造函数实例化"><span>使用构造函数实例化</span></a></h3><p>在XML配置文件中，可以使用<code>&lt;constructor-arg&gt;</code>元素指定构造函数的参数来实例化Bean对象。例如：</p><div class="language-xml line-numbers-mode" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myBean<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.example.MyBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>parameterValue<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>java.lang.String<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>anotherBean<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.example.BeanTwo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>parameter<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里<code>MyBean</code>类的构造函数接受一个<code>String</code>类型的参数。<code>BeanTwo</code>类的构造函数接受一个引用参数。</p><h3 id="使用静态工厂方法实例化" tabindex="-1"><a class="header-anchor" href="#使用静态工厂方法实例化"><span>使用静态工厂方法实例化</span></a></h3><p>可以使用<code>&lt;bean&gt;</code>元素的<code>factory-method</code>属性指定静态工厂方法来实例化Bean对象。例如：</p><div class="language-xml line-numbers-mode" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myBean<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.example.MyBeanFactory<span class="token punctuation">&quot;</span></span> <span class="token attr-name">factory-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createInstance<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>在<code>MyBeanFactory</code>类中，有一个名为<code>createInstance</code>的静态工厂方法返回<code>MyBean</code>对象。</p><h3 id="使用实例工厂方法实例化" tabindex="-1"><a class="header-anchor" href="#使用实例工厂方法实例化"><span>使用实例工厂方法实例化</span></a></h3><p>可以使用<code>&lt;bean&gt;</code>元素的<code>factory-bean</code>属性和<code>factory-method</code>属性结合起来使用实例工厂方法来实例化Bean对象。例如：</p><div class="language-xml line-numbers-mode" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myBeanFactory<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.example.MyBeanFactory<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myBean<span class="token punctuation">&quot;</span></span> <span class="token attr-name">factory-bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myBeanFactory<span class="token punctuation">&quot;</span></span> <span class="token attr-name">factory-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createInstance<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>在<code>MyBeanFactory</code>类中，有一个非静态的<code>createInstance</code>方法返回MyBean对象。</p><h2 id="确定bean的运行时类型" tabindex="-1"><a class="header-anchor" href="#确定bean的运行时类型"><span>确定Bean的运行时类型</span></a></h2><p>确定特定bean的<mark>运行时类型</mark>并非易事。</p><p>原因如下：</p><ul><li>Bean 元数据定义中指定的类只是一个<strong>初始类引用</strong></li><li>可能与声明的工厂方法结合使用，可能是一个<code>FactoryBean</code>类</li><li>AOP代理可能会使用基于接口代理包装bean实例，目标bean的实际类型公开有限（只有其实现的的代理接口）</li><li>等等</li></ul><p><code>BeanFactory.getType()</code> 方法：该方法可以获取bean的实际运行时类型，并且考虑到了上述所有因素。</p>`,19);function m(g,h){const t=p("ExternalLinkIcon");return o(),c("div",null,[u,a("blockquote",null,[r,a("p",null,[n("详细信息请参阅"),a("a",d,[n("使用@Bean注释"),l(t)]),n("。")])]),k])}const v=e(i,[["render",m],["__file","bean-definition.html.vue"]]),B=JSON.parse('{"path":"/spring-framework/core/bean-definition.html","title":"Bean 定义","lang":"zh-CN","frontmatter":{"title":"Bean 定义","author":"会敲代码的程序猿","isOriginal":true,"date":"2024-03-18T00:00:00.000Z","category":"Spring","tag":["Spring","Spring Framework"],"description":"Bean 定义 概述 构建应用程序主干并由Spring IoC 容器管理的对象称为 Bean。 由org.springframework.beans.factory.config.BeanDefinition 接口表示，定义了Bean的配置元数据。 BeanDefinition BeanDefinition 包含以下元数据： Bean的包限定类名 Be...","head":[["meta",{"property":"og:url","content":"https://www.geekyspace.cn/spring-framework/core/bean-definition.html"}],["meta",{"property":"og:site_name","content":"极客空间"}],["meta",{"property":"og:title","content":"Bean 定义"}],["meta",{"property":"og:description","content":"Bean 定义 概述 构建应用程序主干并由Spring IoC 容器管理的对象称为 Bean。 由org.springframework.beans.factory.config.BeanDefinition 接口表示，定义了Bean的配置元数据。 BeanDefinition BeanDefinition 包含以下元数据： Bean的包限定类名 Be..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-22T11:01:18.000Z"}],["meta",{"property":"article:author","content":"会敲代码的程序猿"}],["meta",{"property":"article:tag","content":"Spring"}],["meta",{"property":"article:tag","content":"Spring Framework"}],["meta",{"property":"article:published_time","content":"2024-03-18T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-03-22T11:01:18.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Bean 定义\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-03-18T00:00:00.000Z\\",\\"dateModified\\":\\"2024-03-22T11:01:18.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"会敲代码的程序猿\\"}]}"]]},"headers":[{"level":2,"title":"概述","slug":"概述","link":"#概述","children":[]},{"level":2,"title":"BeanDefinition","slug":"beandefinition","link":"#beandefinition","children":[]},{"level":2,"title":"命名Beans","slug":"命名beans","link":"#命名beans","children":[]},{"level":2,"title":"实例化Bean","slug":"实例化bean","link":"#实例化bean","children":[{"level":3,"title":"使用构造函数实例化","slug":"使用构造函数实例化","link":"#使用构造函数实例化","children":[]},{"level":3,"title":"使用静态工厂方法实例化","slug":"使用静态工厂方法实例化","link":"#使用静态工厂方法实例化","children":[]},{"level":3,"title":"使用实例工厂方法实例化","slug":"使用实例工厂方法实例化","link":"#使用实例工厂方法实例化","children":[]}]},{"level":2,"title":"确定Bean的运行时类型","slug":"确定bean的运行时类型","link":"#确定bean的运行时类型","children":[]}],"git":{"createdTime":1710844105000,"updatedTime":1711105278000,"contributors":[{"name":"zhouyu","email":"zhouyu@liquido.cn","commits":6}]},"readingTime":{"minutes":2.92,"words":877},"filePathRelative":"spring-framework/core/bean-definition.md","localizedDate":"2024年3月18日","excerpt":"\\n<h2>概述</h2>\\n<blockquote>\\n<p>构建应用程序主干并由Spring IoC 容器管理的对象称为 Bean。\\n由<code>org.springframework.beans.factory.config.BeanDefinition</code> 接口表示，定义了Bean的配置元数据。</p>\\n</blockquote>\\n<h2>BeanDefinition</h2>\\n<p><code>BeanDefinition</code> 包含以下元数据：</p>\\n<ul>\\n<li>Bean的包限定类名</li>\\n<li>Bean的行为配置元素，例如作用域、生命周期回调等</li>\\n<li>Bean的依赖关系</li>\\n<li>其他配置信息（如：管理连接池的Bean可以配置池的大小，连接数量等）</li>\\n</ul>","copyright":{"author":"会敲代码的程序猿"},"autoDesc":true}');export{v as comp,B as data};
